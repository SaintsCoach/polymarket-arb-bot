/* ── Reset & Variables ─────────────────────────────────────────────────────── */
*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

:root {
  --bg0:    #05050b;
  --bg1:    #0c0c17;
  --bg2:    #11111f;
  --bg3:    #181828;
  --bg4:    #1e1e32;

  --border:        rgba(255,255,255,0.055);
  --border-bright: rgba(255,255,255,0.10);

  --text:    #dde1f5;
  --muted:   #525270;
  --dim:     #2c2c48;

  --green:      #00e87a;
  --green-glow: rgba(0, 232, 122, 0.18);
  --green-line: rgba(0, 232, 122, 0.3);
  --red:        #ff3361;
  --red-glow:   rgba(255, 51, 97, 0.18);
  --yellow:     #f5c542;
  --yellow-glow:rgba(245, 197, 66, 0.18);
  --blue:       #3b9eff;
  --purple:     #9b59f5;

  --header-h: 56px;
  --gap:      10px;
  --radius:   10px;

  --mono: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace;
  --ui:   'Inter', system-ui, -apple-system, sans-serif;
}

html, body {
  height: 100%;
  overflow: hidden;
  background: var(--bg0);
  color: var(--text);
  font-family: var(--ui);
  font-size: 13px;
  line-height: 1.4;
  -webkit-font-smoothing: antialiased;
}

/* ── Header ──────────────────────────────────────────────────────────────────*/
.header {
  height: var(--header-h);
  background: var(--bg1);
  border-bottom: 1px solid var(--border);
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 18px;
  flex-shrink: 0;
  position: relative;
  z-index: 20;
}

.brand {
  display: flex;
  align-items: center;
  gap: 10px;
}
.brand-hex {
  font-size: 22px;
  line-height: 1;
  background: linear-gradient(135deg, var(--purple), var(--blue));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}
.brand-name {
  font-family: var(--mono);
  font-size: 13px;
  font-weight: 600;
  letter-spacing: 0.18em;
  color: var(--text);
}
.live-pill {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 3px 9px;
  border-radius: 99px;
  background: rgba(255,255,255,0.03);
  border: 1px solid var(--border);
  font-family: var(--mono);
  font-size: 10px;
  letter-spacing: 0.1em;
  color: var(--muted);
  transition: all 0.4s ease;
}
.live-pill.online {
  color: var(--green);
  border-color: var(--green-line);
  background: var(--green-glow);
}
.live-dot {
  width: 6px; height: 6px;
  border-radius: 50%;
  background: var(--muted);
  transition: background 0.4s ease;
}
.live-pill.online .live-dot {
  background: var(--green);
  box-shadow: 0 0 6px var(--green);
  animation: blink 2s ease-in-out infinite;
}
@keyframes blink {
  0%,100% { opacity: 1; }
  50%      { opacity: 0.35; }
}

/* Stats bar */
.stats-bar {
  display: flex;
  align-items: center;
  gap: 2px;
}
.stat {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 0 14px;
}
.stat-lbl {
  font-size: 9px;
  font-weight: 500;
  letter-spacing: 0.09em;
  color: var(--muted);
  margin-bottom: 2px;
}
.stat-val {
  font-family: var(--mono);
  font-size: 15px;
  font-weight: 600;
  color: var(--text);
  transition: color 0.3s;
}
.stat-val.g { color: var(--green); }
.stat-val.r { color: var(--red); }
.stat-val.y { color: var(--yellow); }

.sep { width: 1px; height: 26px; background: var(--border); }

/* ── Layout ──────────────────────────────────────────────────────────────────*/
.grid {
  display: grid;
  grid-template-columns: 230px 1fr 310px;
  grid-template-rows: 1fr;
  gap: var(--gap);
  padding: var(--gap);
  height: calc(100vh - var(--header-h));
  overflow: hidden;
}
.col-mid {
  display: grid;
  grid-template-rows: 1fr 1fr;
  gap: var(--gap);
  min-height: 0;
}

/* ── Panel ───────────────────────────────────────────────────────────────────*/
.panel {
  background: var(--bg1);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  display: flex;
  flex-direction: column;
  overflow: hidden;
  min-height: 0;
}
.p-head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 10px 14px;
  border-bottom: 1px solid var(--border);
  flex-shrink: 0;
}
.p-title {
  font-family: var(--mono);
  font-size: 10px;
  font-weight: 600;
  letter-spacing: 0.15em;
  color: var(--muted);
}
.badge {
  font-family: var(--mono);
  font-size: 10px;
  padding: 2px 8px;
  border-radius: 5px;
  background: rgba(255,255,255,0.04);
  border: 1px solid var(--border);
  color: var(--muted);
}
.badge.y { color: var(--yellow); background: var(--yellow-glow); border-color: rgba(245,197,66,0.25); }
.badge.g { color: var(--green);  background: var(--green-glow);  border-color: var(--green-line); }

/* ── Scanner panel ───────────────────────────────────────────────────────────*/
.scan-indicator {
  display: flex;
  align-items: center;
  gap: 5px;
  font-family: var(--mono);
  font-size: 9px;
  letter-spacing: 0.1em;
  color: var(--blue);
}
.scan-ring {
  width: 7px; height: 7px;
  border-radius: 50%;
  background: var(--blue);
  animation: ripple 2s ease-out infinite;
}
@keyframes ripple {
  0%   { box-shadow: 0 0 0 0 rgba(59,158,255,.7); }
  70%  { box-shadow: 0 0 0 7px rgba(59,158,255,0); }
  100% { box-shadow: 0 0 0 0 rgba(59,158,255,0); }
}
.scan-meta {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
  border-bottom: 1px solid var(--border);
  flex-shrink: 0;
}
.scan-kv {
  padding: 8px 6px;
  text-align: center;
  border-right: 1px solid var(--border);
}
.scan-kv:last-child { border-right: none; }
.scan-k {
  font-size: 9px;
  color: var(--muted);
  display: block;
  margin-bottom: 3px;
  letter-spacing: 0.05em;
}
.scan-v {
  font-family: var(--mono);
  font-size: 14px;
  font-weight: 600;
  color: var(--text);
}
.scan-v.y { color: var(--yellow); }

.candidate-list {
  flex: 1;
  overflow-y: auto;
  padding: 7px;
  display: flex;
  flex-direction: column;
  gap: 4px;
}
.cand-card {
  background: var(--bg2);
  border: 1px solid var(--border);
  border-radius: 6px;
  padding: 7px 9px;
  animation: drop-in 0.28s ease-out;
}
.cand-q {
  font-size: 11px;
  color: var(--text);
  line-height: 1.35;
  margin-bottom: 4px;
}
.cand-est {
  font-family: var(--mono);
  font-size: 10px;
  color: var(--yellow);
}

/* ── Feed panels ─────────────────────────────────────────────────────────────*/
.feed {
  flex: 1;
  overflow-y: auto;
  padding: 7px;
  display: flex;
  flex-direction: column;
  gap: 6px;
}
.empty {
  text-align: center;
  color: var(--muted);
  font-size: 11px;
  padding: 24px 12px;
  font-style: italic;
}

/* Opportunity card */
.opp-card {
  background: var(--bg2);
  border: 1px solid rgba(245,197,66,0.2);
  border-left: 3px solid var(--yellow);
  border-radius: 7px;
  padding: 10px 12px;
  animation: drop-in 0.32s cubic-bezier(.34,1.56,.64,1);
}
.card-row {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 8px;
  margin-bottom: 8px;
}
.card-q {
  font-size: 11px;
  color: var(--text);
  line-height: 1.4;
  flex: 1;
}
.card-time {
  font-family: var(--mono);
  font-size: 9px;
  color: var(--muted);
  white-space: nowrap;
  flex-shrink: 0;
}
.metrics {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
}
.metric { display: flex; flex-direction: column; gap: 1px; }
.m-lbl {
  font-size: 9px;
  color: var(--muted);
  letter-spacing: 0.06em;
}
.m-val {
  font-family: var(--mono);
  font-size: 12px;
  font-weight: 600;
  color: var(--text);
}
.m-val.b { color: var(--blue); }
.m-val.y { color: var(--yellow); }
.m-val.g { color: var(--green); }

/* Trade card */
.trade-card {
  border-radius: 7px;
  padding: 9px 11px;
  animation: drop-in 0.32s cubic-bezier(.34,1.56,.64,1);
  display: flex;
  align-items: flex-start;
  gap: 9px;
}
.trade-card.ok  { background: rgba(0,232,122,.04); border: 1px solid rgba(0,232,122,.2); border-left: 3px solid var(--green); }
.trade-card.bad { background: rgba(255,51,97,.04);  border: 1px solid rgba(255,51,97,.2);  border-left: 3px solid var(--red); }
.trade-card.skip{ background: rgba(245,197,66,.03); border: 1px solid rgba(245,197,66,.15); border-left: 3px solid rgba(245,197,66,.5); }

.outcome-tag {
  font-family: var(--mono);
  font-size: 9px;
  font-weight: 700;
  letter-spacing: 0.1em;
  padding: 3px 7px;
  border-radius: 4px;
  white-space: nowrap;
  flex-shrink: 0;
  margin-top: 1px;
}
.trade-card.ok   .outcome-tag { background: var(--green-glow); color: var(--green); border: 1px solid var(--green-line); }
.trade-card.bad  .outcome-tag { background: var(--red-glow);   color: var(--red);   border: 1px solid rgba(255,51,97,.3); }
.trade-card.skip .outcome-tag { background: var(--yellow-glow); color: var(--yellow); border: 1px solid rgba(245,197,66,.3); }

.trade-body { flex: 1; min-width: 0; }
.trade-q {
  font-size: 11px;
  color: var(--text);
  margin-bottom: 3px;
  line-height: 1.35;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.trade-detail {
  font-family: var(--mono);
  font-size: 10px;
  color: var(--muted);
}
.trade-profit {
  font-family: var(--mono);
  font-size: 13px;
  font-weight: 700;
  color: var(--green);
  margin-left: auto;
  flex-shrink: 0;
  align-self: center;
}

/* ── Chart panel ─────────────────────────────────────────────────────────────*/
.chart-wrap {
  flex: 1;
  padding: 12px 14px 8px;
  min-height: 0;
  position: relative;
}
.chart-footer {
  padding: 7px 14px;
  border-top: 1px solid var(--border);
  font-size: 10px;
  color: var(--muted);
  display: flex;
  align-items: center;
  gap: 6px;
  flex-shrink: 0;
}
.legend-dot { font-size: 11px; }
.legend-dot.g { color: var(--green); }

/* ── Scrollbars ──────────────────────────────────────────────────────────────*/
.feed::-webkit-scrollbar,
.candidate-list::-webkit-scrollbar { width: 3px; }
.feed::-webkit-scrollbar-track,
.candidate-list::-webkit-scrollbar-track { background: transparent; }
.feed::-webkit-scrollbar-thumb,
.candidate-list::-webkit-scrollbar-thumb { background: var(--dim); border-radius: 99px; }

/* ── Animations ──────────────────────────────────────────────────────────────*/
@keyframes drop-in {
  from { opacity: 0; transform: translateY(-10px) scale(0.97); }
  to   { opacity: 1; transform: translateY(0)      scale(1); }
}
@keyframes pop {
  0%   { transform: scale(1); }
  40%  { transform: scale(1.18); }
  100% { transform: scale(1); }
}
.pop { animation: pop 0.35s ease-out; }

/* ── Tab navigation ──────────────────────────────────────────────────────────*/
.tab-nav {
  display: flex;
  gap: 2px;
  background: var(--bg0);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 3px;
}
.tab-btn {
  font-family: var(--mono);
  font-size: 10px;
  font-weight: 600;
  letter-spacing: 0.12em;
  color: var(--muted);
  background: transparent;
  border: none;
  border-radius: 6px;
  padding: 5px 14px;
  cursor: pointer;
  transition: all 0.2s ease;
}
.tab-btn:hover   { color: var(--text); }
.tab-btn.active  { background: var(--bg3); color: var(--text); }

/* ── Tab content ─────────────────────────────────────────────────────────────*/
.tab-content         { display: none; height: calc(100vh - var(--header-h)); }
.tab-content.active  { display: block; }

/* ── Mirror Bot layout ───────────────────────────────────────────────────────*/
.mirror-grid {
  display: grid;
  grid-template-columns: 280px 1fr 260px;
  gap: var(--gap);
  padding: var(--gap);
  height: 100%;
  overflow: hidden;
}
.mirror-left,
.mirror-center,
.mirror-right {
  display: flex;
  flex-direction: column;
  gap: var(--gap);
  min-height: 0;
}

/* ── Portfolio overview ──────────────────────────────────────────────────────*/
.overview-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  border-top: none;
}
.ov-cell {
  display: flex;
  flex-direction: column;
  padding: 10px 14px;
  border-bottom: 1px solid var(--border);
  border-right: 1px solid var(--border);
}
.ov-cell:nth-child(even) { border-right: none; }
.ov-wide { grid-column: span 2; border-right: none; }
.ov-lbl {
  font-size: 9px;
  letter-spacing: 0.08em;
  color: var(--muted);
  margin-bottom: 3px;
}
.ov-val {
  font-family: var(--mono);
  font-size: 14px;
  font-weight: 600;
  color: var(--text);
}
.ov-val.g { color: var(--green); }
.ov-val.r { color: var(--red); }
.ov-val.y { color: var(--yellow); }

/* ── Address list ────────────────────────────────────────────────────────────*/
.btn-add {
  font-family: var(--mono);
  font-size: 10px;
  font-weight: 600;
  letter-spacing: 0.1em;
  color: var(--blue);
  background: rgba(59,158,255,0.08);
  border: 1px solid rgba(59,158,255,0.25);
  border-radius: 5px;
  padding: 3px 10px;
  cursor: pointer;
  transition: all 0.2s;
}
.btn-add:hover { background: rgba(59,158,255,0.15); }

.btn-danger {
  font-family: var(--mono);
  font-size: 10px;
  font-weight: 700;
  letter-spacing: 0.1em;
  color: var(--red);
  background: var(--red-glow);
  border: 1px solid rgba(255,51,97,.35);
  border-radius: 5px;
  padding: 4px 12px;
  cursor: pointer;
  transition: all 0.2s;
}
.btn-danger:hover { background: rgba(255,51,97,.22); }

.addr-list {
  flex: 1;
  overflow-y: auto;
  padding: 7px;
  display: flex;
  flex-direction: column;
  gap: 5px;
}
.addr-card {
  background: var(--bg2);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 9px 11px;
  animation: drop-in 0.28s ease-out;
}
.addr-card.stale       { border-left: 3px solid var(--red); }
.addr-card.rate_limited{ border-left: 3px solid var(--yellow); }
.addr-card.ok          { border-left: 3px solid var(--green); }

.addr-row1 {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 5px;
}
.addr-nick {
  font-weight: 600;
  font-size: 12px;
  color: var(--text);
}
.health-dot {
  width: 7px; height: 7px;
  border-radius: 50%;
  flex-shrink: 0;
}
.health-dot.ok          { background: var(--green); box-shadow: 0 0 5px var(--green); }
.health-dot.stale       { background: var(--red); }
.health-dot.rate_limited{ background: var(--yellow); }

.addr-hex {
  font-family: var(--mono);
  font-size: 10px;
  color: var(--muted);
  margin-bottom: 5px;
}
.addr-stats {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
}
.addr-stat {
  font-family: var(--mono);
  font-size: 10px;
  color: var(--muted);
}
.addr-stat span { color: var(--text); }

.addr-actions {
  display: flex;
  gap: 5px;
  margin-top: 6px;
}
.btn-sm {
  font-family: var(--mono);
  font-size: 9px;
  font-weight: 600;
  letter-spacing: 0.08em;
  padding: 3px 8px;
  border-radius: 4px;
  border: 1px solid var(--border);
  background: var(--bg3);
  color: var(--muted);
  cursor: pointer;
  transition: all 0.2s;
}
.btn-sm:hover      { color: var(--text); border-color: var(--border-bright); }
.btn-sm.danger:hover { color: var(--red); border-color: rgba(255,51,97,.4); }

/* ── Add-address form ────────────────────────────────────────────────────────*/
.add-form {
  padding: 10px;
  border-top: 1px solid var(--border);
  display: flex;
  flex-direction: column;
  gap: 6px;
  flex-shrink: 0;
}
.form-input {
  font-family: var(--mono);
  font-size: 11px;
  background: var(--bg0);
  border: 1px solid var(--border);
  border-radius: 5px;
  color: var(--text);
  padding: 7px 10px;
  outline: none;
  transition: border-color 0.2s;
}
.form-input:focus  { border-color: var(--blue); }
.form-input::placeholder { color: var(--muted); }
.form-row { display: flex; gap: 6px; }

.btn-primary {
  flex: 1;
  font-family: var(--mono);
  font-size: 10px;
  font-weight: 700;
  letter-spacing: 0.1em;
  background: var(--blue);
  color: #000;
  border: none;
  border-radius: 5px;
  padding: 7px;
  cursor: pointer;
  transition: opacity 0.2s;
}
.btn-primary:hover { opacity: 0.85; }
.btn-cancel {
  font-family: var(--mono);
  font-size: 10px;
  font-weight: 600;
  letter-spacing: 0.1em;
  background: transparent;
  color: var(--muted);
  border: 1px solid var(--border);
  border-radius: 5px;
  padding: 7px 12px;
  cursor: pointer;
  transition: all 0.2s;
}
.btn-cancel:hover { color: var(--text); }

/* ── Positions table ─────────────────────────────────────────────────────────*/
.tbl-wrap {
  flex: 1;
  overflow-y: auto;
  overflow-x: hidden;
}
.pos-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 11px;
}
.pos-table th {
  font-family: var(--mono);
  font-size: 9px;
  font-weight: 600;
  letter-spacing: 0.08em;
  color: var(--muted);
  text-align: left;
  padding: 7px 10px;
  border-bottom: 1px solid var(--border);
  white-space: nowrap;
  position: sticky;
  top: 0;
  background: var(--bg1);
}
.pos-table td {
  padding: 7px 10px;
  border-bottom: 1px solid rgba(255,255,255,0.025);
  color: var(--text);
  vertical-align: middle;
  max-width: 200px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
.pos-table .empty {
  text-align: left;
  padding: 18px 10px;
}
.pnl-pos { color: var(--green); font-family: var(--mono); font-size: 11px; }
.pnl-neg { color: var(--red);   font-family: var(--mono); font-size: 11px; }
.mono-sm { font-family: var(--mono); font-size: 10px; color: var(--muted); }
.side-yes { color: var(--green); font-family: var(--mono); font-size: 10px; font-weight: 700; }
.side-no  { color: var(--red);   font-family: var(--mono); font-size: 10px; font-weight: 700; }

/* Resolved trade cards in the right feed */
.resolved-card {
  background: var(--bg2);
  border: 1px solid var(--border);
  border-radius: 7px;
  padding: 9px 11px;
  animation: drop-in 0.28s ease-out;
}
.resolved-card.win  { border-left: 3px solid var(--green); }
.resolved-card.loss { border-left: 3px solid var(--red); }
.resolved-card.push { border-left: 3px solid var(--muted); }
.res-q  { font-size: 11px; color: var(--text); margin-bottom: 4px; line-height: 1.35; }
.res-meta { font-family: var(--mono); font-size: 10px; color: var(--muted); }
.res-pnl  { font-family: var(--mono); font-size: 13px; font-weight: 700; margin-top: 4px; }
.res-pnl.pos { color: var(--green); }
.res-pnl.neg { color: var(--red); }

/* ── Poll debug panel ────────────────────────────────────────────────────────*/
.debug-toggle {
  position: fixed;
  bottom: 12px;
  right: 12px;
  font-family: var(--mono);
  font-size: 9px;
  font-weight: 700;
  letter-spacing: 0.12em;
  color: var(--muted);
  background: var(--bg2);
  border: 1px solid var(--border);
  border-radius: 5px;
  padding: 4px 10px;
  cursor: pointer;
  z-index: 100;
  transition: all 0.2s;
}
.debug-toggle:hover { color: var(--text); border-color: var(--border-bright); }

.debug-panel {
  display: none;
  position: fixed;
  bottom: 40px;
  right: 12px;
  width: 520px;
  max-height: 420px;
  background: var(--bg1);
  border: 1px solid var(--border-bright);
  border-radius: var(--radius);
  z-index: 99;
  flex-direction: column;
  overflow: hidden;
}
.debug-panel.open { display: flex; }
.debug-head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 8px 12px;
  border-bottom: 1px solid var(--border);
  flex-shrink: 0;
}
.debug-title {
  font-family: var(--mono);
  font-size: 10px;
  font-weight: 600;
  letter-spacing: 0.12em;
  color: var(--blue);
}
.debug-close {
  background: none;
  border: none;
  color: var(--muted);
  cursor: pointer;
  font-size: 12px;
  padding: 0 4px;
}
.debug-close:hover { color: var(--text); }
#debug-log {
  flex: 1;
  overflow-y: auto;
  padding: 8px;
  display: flex;
  flex-direction: column;
  gap: 5px;
}
.debug-entry {
  background: var(--bg2);
  border: 1px solid var(--border);
  border-radius: 6px;
  padding: 7px 10px;
  font-family: var(--mono);
  font-size: 10px;
  line-height: 1.6;
}
.debug-entry .de-time { color: var(--muted); }
.debug-entry .de-addr { color: var(--blue); }
.debug-entry .de-ok   { color: var(--green); }
.debug-entry .de-warn { color: var(--yellow); }
.debug-entry .de-new  { color: var(--green); font-weight: 700; }
.debug-entry .de-item { color: var(--text); display: block; padding-left: 10px; }

/* ── DataFeed event colors ───────────────────────────────────────────────────*/
.df-event-goal  { color: var(--green); }
.df-event-red   { color: var(--red); }
.df-event-start { color: var(--text-dim, var(--muted)); }
.df-event-end   { color: var(--muted); }

/* Scrollbars for new elements */
.addr-list::-webkit-scrollbar,
.tbl-wrap::-webkit-scrollbar,
.feed::-webkit-scrollbar  { width: 3px; }
.addr-list::-webkit-scrollbar-track,
.tbl-wrap::-webkit-scrollbar-track  { background: transparent; }
.addr-list::-webkit-scrollbar-thumb,
.tbl-wrap::-webkit-scrollbar-thumb  { background: var(--dim); border-radius: 99px; }
